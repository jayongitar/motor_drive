EESchema Schematic File Version 4
EELAYER 30 0
EELAYER END
$Descr B 17000 11000
encoding utf-8
Sheet 1 16
Title ""
Date ""
Rev ""
Comp ""
Comment1 ""
Comment2 ""
Comment3 ""
Comment4 ""
$EndDescr
$Sheet
S 13200 2250 1000 1050
U 5E257703
F0 "half_bridge_1" 50
F1 "half_bridge.sch" 50
F2 "I_sense_p" I L 13200 3000 50 
F3 "I_sense_n" I L 13200 3150 50 
F4 "GH" I L 13200 2400 50 
F5 "GL" I L 13200 2700 50 
F6 "SH" I L 13200 2550 50 
F7 "M" I R 14200 2400 50 
F8 "DC_neg" I R 14200 3150 50 
F9 "DC_pos" I R 14200 3000 50 
$EndSheet
$Sheet
S 13200 4050 1000 1050
U 5E26944C
F0 "half_bridge_2" 50
F1 "half_bridge.sch" 50
F2 "I_sense_p" I L 13200 4800 50 
F3 "I_sense_n" I L 13200 4950 50 
F4 "GH" I L 13200 4200 50 
F5 "GL" I L 13200 4500 50 
F6 "SH" I L 13200 4350 50 
F7 "M" I R 14200 4200 50 
F8 "DC_neg" I R 14200 4950 50 
F9 "DC_pos" I R 14200 4800 50 
$EndSheet
$Sheet
S 13200 5850 1000 1100
U 5E26B60E
F0 "half_bridge_3" 50
F1 "half_bridge.sch" 50
F2 "I_sense_p" I L 13200 6600 50 
F3 "I_sense_n" I L 13200 6750 50 
F4 "GH" I L 13200 6000 50 
F5 "GL" I L 13200 6300 50 
F6 "SH" I L 13200 6150 50 
F7 "M" I R 14200 6000 50 
F8 "DC_neg" I R 14200 6750 50 
F9 "DC_pos" I R 14200 6600 50 
$EndSheet
$Sheet
S 8500 5450 900  600 
U 5E2938C8
F0 "I_sense_2" 50
F1 "sense_amp.sch" 50
F2 "OUT" I L 8500 5600 50 
F3 "IN+" I R 9400 5600 50 
F4 "IN-" I R 9400 5750 50 
F5 "GND" I L 8500 5900 50 
F6 "5.0V" I L 8500 5750 50 
$EndSheet
$Sheet
S 8500 6400 900  600 
U 5E295828
F0 "I_sense_3" 50
F1 "sense_amp.sch" 50
F2 "OUT" I L 8500 6550 50 
F3 "IN+" I R 9400 6550 50 
F4 "IN-" I R 9400 6700 50 
F5 "GND" I L 8500 6850 50 
F6 "5.0V" I L 8500 6700 50 
$EndSheet
$Sheet
S 8500 7350 900  600 
U 5E336639
F0 "IDC_sense" 50
F1 "sense_amp.sch" 50
F2 "OUT" I L 8500 7500 50 
F3 "IN+" I R 9400 7500 50 
F4 "IN-" I R 9400 7650 50 
F5 "GND" I L 8500 7800 50 
F6 "5.0V" I L 8500 7650 50 
$EndSheet
$Sheet
S 8500 8300 900  600 
U 5E33A08D
F0 "VDC_sense" 50
F1 "sense_amp.sch" 50
F2 "OUT" I L 8500 8450 50 
F3 "IN+" I R 9400 8450 50 
F4 "IN-" I R 9400 8600 50 
F5 "GND" I L 8500 8750 50 
F6 "5.0V" I L 8500 8600 50 
$EndSheet
$Sheet
S 2450 4500 1200 1700
U 5E334D58
F0 "DC_Link_Input" 50
F1 "DC_Link.sch" 50
F2 "DC_pos" I R 3650 5650 50 
F3 "VDC_sense_p" I R 3650 5200 50 
F4 "VDC_sense_n" I R 3650 5350 50 
F5 "DC_neg" I R 3650 5800 50 
F6 "DC_pos_in" I L 2450 5650 50 
F7 "DC_neg_in" I L 2450 5800 50 
F8 "IDC_sense_n" I R 3650 4750 50 
F9 "phase_shield" I R 3650 5950 50 
$EndSheet
$Sheet
S 2450 8000 900  1000
U 5E373134
F0 "Position sensor" 50
F1 "ADA4571WHRZ.sch" 50
F2 "GND" I R 3350 8800 50 
F3 "SIN" I R 3350 8200 50 
F4 "COS" I R 3350 8350 50 
F5 "VDD" I R 3350 8650 50 
$EndSheet
$Sheet
S 2450 1500 950  1150
U 5E38D632
F0 "RS422" 50
F1 "SN65.sch" 50
F2 "GND" I R 3400 2450 50 
F3 "VCC" I R 3400 2300 50 
F4 "D" I R 3400 1850 50 
F5 "R" I R 3400 2000 50 
F6 "DEnRE" I R 3400 1700 50 
F7 "A" I L 2450 1700 50 
F8 "B" I L 2450 1850 50 
F9 "balance" I L 2450 2000 50 
$EndSheet
Text Label 9400 4800 0    50   ~ 0
I_sense_n1
Text Label 9400 4650 0    50   ~ 0
I_sense_p1
Text Label 9400 5750 0    50   ~ 0
I_sense_n2
Text Label 9400 5600 0    50   ~ 0
I_sense_p2
Text Label 9400 6700 0    50   ~ 0
I_sense_n3
Text Label 9400 6550 0    50   ~ 0
I_sense_p3
Text Label 10600 5200 0    50   ~ 0
5.0V
Text Label 10600 5350 0    50   ~ 0
GND
Wire Wire Line
	10600 5350 11000 5350
Wire Wire Line
	10600 5200 10850 5200
Wire Wire Line
	11000 5050 10850 5050
Wire Wire Line
	10850 5050 10850 5200
Connection ~ 10850 5200
Wire Wire Line
	10850 5200 11000 5200
$Sheet
S 11000 3500 900  2050
U 5E28CA2E
F0 "FAN7888" 50
F1 "FAN7888.sch" 50
F2 "GND" I L 11000 5350 50 
F3 "VDD" I L 11000 5200 50 
F4 "BS_SUP" I L 11000 5050 50 
F5 "GH_1" I R 11900 3700 50 
F6 "GL_1" I R 11900 4000 50 
F7 "GH_2" I R 11900 4350 50 
F8 "GL_2" I R 11900 4650 50 
F9 "GH_3" I R 11900 5000 50 
F10 "GL_3" I R 11900 5300 50 
F11 "SW_1" I R 11900 3850 50 
F12 "SW_2" I R 11900 4500 50 
F13 "SW_3" I R 11900 5150 50 
F14 "HS_1" I L 11000 3700 50 
F15 "LS_1" I L 11000 3850 50 
F16 "HS_2" I L 11000 4100 50 
F17 "LS_2" I L 11000 4250 50 
F18 "HS_3" I L 11000 4550 50 
F19 "LS_3" I L 11000 4700 50 
$EndSheet
Text Label 11900 3700 0    50   ~ 0
GH_1
Text Label 11900 3850 0    50   ~ 0
SW_1
Text Label 11900 4000 0    50   ~ 0
GL_1
Text Label 11900 4350 0    50   ~ 0
GH_2
Text Label 11900 4500 0    50   ~ 0
SW_2
Text Label 11900 4650 0    50   ~ 0
GL_2
Text Label 11900 5000 0    50   ~ 0
GH_3
Text Label 11900 5150 0    50   ~ 0
SW_3
Text Label 11900 5300 0    50   ~ 0
GL_3
Text Label 10800 3700 0    50   ~ 0
HS_1
Text Label 10800 3850 0    50   ~ 0
LS_1
Text Label 10800 4100 0    50   ~ 0
HS_2
Text Label 10800 4250 0    50   ~ 0
LS_2
Text Label 10800 4550 0    50   ~ 0
HS_3
Text Label 10800 4700 0    50   ~ 0
LS_3
Text Label 13000 4200 0    50   ~ 0
GH_2
Wire Wire Line
	10800 3700 11000 3700
Wire Wire Line
	10800 3850 11000 3850
Wire Wire Line
	10800 4100 11000 4100
Wire Wire Line
	10800 4250 11000 4250
Wire Wire Line
	10800 4550 11000 4550
Wire Wire Line
	10800 4700 11000 4700
Wire Wire Line
	13000 4200 13200 4200
Text Label 13000 4350 0    50   ~ 0
SW_2
Text Label 13000 4500 0    50   ~ 0
GL_2
Text Label 13000 2400 0    50   ~ 0
GH_1
Text Label 13000 2550 0    50   ~ 0
SW_1
Text Label 13000 2700 0    50   ~ 0
GL_1
Text Label 13000 6000 0    50   ~ 0
GH_3
Text Label 13000 6150 0    50   ~ 0
SW_3
Text Label 13000 6300 0    50   ~ 0
GL_3
Wire Wire Line
	13000 6000 13200 6000
Wire Wire Line
	13000 6150 13200 6150
Wire Wire Line
	13000 6300 13200 6300
Wire Wire Line
	13000 4350 13200 4350
Wire Wire Line
	13000 4500 13200 4500
Wire Wire Line
	13000 2400 13200 2400
Wire Wire Line
	13000 2550 13200 2550
Wire Wire Line
	13000 2700 13200 2700
Text Label 8300 4800 0    50   ~ 0
5.0V
Text Label 8300 4950 0    50   ~ 0
GND
Text Label 8150 5600 0    50   ~ 0
I_sense_2
Text Label 8300 5750 0    50   ~ 0
5.0V
Text Label 8300 5900 0    50   ~ 0
GND
Text Label 8150 6550 0    50   ~ 0
I_sense_3
Text Label 8300 6700 0    50   ~ 0
5.0V
Text Label 8300 6850 0    50   ~ 0
GND
Text Label 8100 7500 0    50   ~ 0
IDC_sense
Text Label 8100 8450 0    50   ~ 0
VDC_sense
Text Label 8300 8600 0    50   ~ 0
5.0V
Text Label 8300 8750 0    50   ~ 0
GND
Text Label 8300 7650 0    50   ~ 0
5.0V
Text Label 8300 7800 0    50   ~ 0
GND
Wire Wire Line
	8100 8450 8500 8450
Wire Wire Line
	8300 8600 8500 8600
Wire Wire Line
	8300 8750 8500 8750
Wire Wire Line
	8300 7800 8500 7800
Wire Wire Line
	8300 7650 8500 7650
Wire Wire Line
	8500 7500 8100 7500
Wire Wire Line
	8300 6850 8500 6850
Wire Wire Line
	8300 6700 8500 6700
Wire Wire Line
	8150 6550 8500 6550
Wire Wire Line
	8300 4800 8500 4800
Wire Wire Line
	8300 4950 8500 4950
Wire Wire Line
	8150 5600 8500 5600
Wire Wire Line
	8300 5750 8500 5750
Wire Wire Line
	8300 5900 8500 5900
Text Label 9400 7500 0    50   ~ 0
IDC_sense_p
Text Label 9400 7650 0    50   ~ 0
IDC_sense_n
Text Label 9400 8450 0    50   ~ 0
VDC_sense_p
Text Label 9400 8600 0    50   ~ 0
VDC_sense_n
Text Label 14200 3000 0    50   ~ 0
DC_pos
Text Label 14200 3150 0    50   ~ 0
DC_neg
Text Label 14200 4800 0    50   ~ 0
DC_pos
Text Label 14200 4950 0    50   ~ 0
DC_neg
Text Label 14200 6600 0    50   ~ 0
DC_pos
Text Label 14200 6750 0    50   ~ 0
DC_neg
Text Label 12800 3000 0    50   ~ 0
I_sense_p1
Text Label 12800 3150 0    50   ~ 0
I_sense_n1
Text Label 12800 4800 0    50   ~ 0
I_sense_p2
Text Label 12800 4950 0    50   ~ 0
I_sense_n2
Text Label 12800 6600 0    50   ~ 0
I_sense_p3
Text Label 12800 6750 0    50   ~ 0
I_sense_n3
Wire Wire Line
	12800 6600 13200 6600
Wire Wire Line
	12800 6750 13200 6750
Wire Wire Line
	12800 4950 13200 4950
Wire Wire Line
	12800 4800 13200 4800
Wire Wire Line
	12800 3150 13200 3150
Wire Wire Line
	12800 3000 13200 3000
Text Label 3350 8200 0    50   ~ 0
sin
Text Label 3350 8350 0    50   ~ 0
cos
Text Label 3350 8650 0    50   ~ 0
5.0V
Text Label 3350 8800 0    50   ~ 0
GND
Text Label 6850 3350 0    50   ~ 0
HS_1
Text Label 6850 3500 0    50   ~ 0
LS_1
Text Label 6850 3650 0    50   ~ 0
HS_2
Text Label 6850 3800 0    50   ~ 0
LS_2
Text Label 6850 3950 0    50   ~ 0
HS_3
Text Label 6850 4100 0    50   ~ 0
LS_3
Text Label 6850 4650 0    50   ~ 0
I_sense_2
Text Label 6850 4800 0    50   ~ 0
I_sense_3
Text Label 6850 4950 0    50   ~ 0
IDC_sense
Text Label 6850 5100 0    50   ~ 0
VDC_sense
Text Label 6850 5250 0    50   ~ 0
sin
Text Label 6850 5400 0    50   ~ 0
cos
Text Label 6850 5850 0    50   ~ 0
I_sense_1
Text Label 6850 6000 0    50   ~ 0
I_sense_2
Text Label 6850 6150 0    50   ~ 0
therm_1
Text Label 6850 6300 0    50   ~ 0
therm_2
Text Label 6850 6450 0    50   ~ 0
sin
Text Label 4800 3600 0    50   ~ 0
MOSI
Text Label 4800 3750 0    50   ~ 0
MISO
Text Label 4800 3900 0    50   ~ 0
CLK
Text Label 4800 4050 0    50   ~ 0
nEN
Wire Wire Line
	4800 3600 5000 3600
Wire Wire Line
	4800 3750 5000 3750
Wire Wire Line
	4800 3900 5000 3900
Wire Wire Line
	4800 4050 5000 4050
Text Label 4800 6450 0    50   ~ 0
5.0V
Text Label 4800 6600 0    50   ~ 0
GND
Wire Wire Line
	4800 6600 5000 6600
Wire Wire Line
	4800 6450 5000 6450
Text Label 3650 4750 0    50   ~ 0
IDC_sense_n
Text Label 1850 5650 0    50   ~ 0
IDC_sense_p
Text Label 3650 5200 0    50   ~ 0
VDC_sense_p
Text Label 3650 5350 0    50   ~ 0
VDC_sense_n
Text Label 3650 5650 0    50   ~ 0
DC_pos
Text Label 3650 5800 0    50   ~ 0
DC_neg
Text Label 2000 1700 0    50   ~ 0
A
Text Label 2000 1850 0    50   ~ 0
B
Text Label 3400 2300 0    50   ~ 0
5.0V
Text Label 3400 2450 0    50   ~ 0
GND
Text Label 2000 2000 0    50   ~ 0
balance
Text Label 3400 1850 0    50   ~ 0
UART_TX
Text Label 3400 2000 0    50   ~ 0
UART_RX
Text Label 3400 1700 0    50   ~ 0
DEnRE
$Sheet
S 5000 3000 1850 3900
U 5E2C4A87
F0 "F28027" 50
F1 "F28027.sch" 50
F2 "ADC_A0" I R 6850 4500 50 
F3 "ADC_A1" I R 6850 4650 50 
F4 "ADC_A2" I R 6850 4800 50 
F5 "ADC_A3" I R 6850 4950 50 
F6 "ADC_A4" I R 6850 5100 50 
F7 "ADC_A6" I R 6850 5250 50 
F8 "ADC_A7" I R 6850 5400 50 
F9 "ADC_B1" I R 6850 5850 50 
F10 "ADC_B2" I R 6850 6000 50 
F11 "ADC_B3" I R 6850 6150 50 
F12 "ADC_B4" I R 6850 6300 50 
F13 "ADC_B6" I R 6850 6450 50 
F14 "PWM1" I R 6850 3500 50 
F15 "PWM2" I R 6850 3650 50 
F16 "PWM3" I R 6850 3800 50 
F17 "PWM4" I R 6850 3950 50 
F18 "PWM5" I R 6850 4100 50 
F19 "5.0V" I L 5000 6450 50 
F20 "GND" I L 5000 6600 50 
F21 "UART_TX" I L 5000 4500 50 
F22 "UART_RX" I L 5000 4650 50 
F23 "GPIO_34" I L 5000 5200 50 
F24 "GPIO_33" I L 5000 5350 50 
F25 "GPIO_32" I L 5000 5500 50 
F26 "GPIO_6" I L 5000 5950 50 
F27 "GPIO_12" I L 5000 5650 50 
F28 "GPIO_7" I L 5000 5800 50 
F29 "ADC_B7" I R 6850 6600 50 
F30 "PWM0" I R 6850 3350 50 
F31 "chip_reset" I L 5000 3200 50 
F32 "SPI_MISO" I L 5000 3750 50 
F33 "SPI_MOSI" I L 5000 3600 50 
F34 "SPI_nENABLE" I L 5000 3900 50 
F35 "SPI_CLK" I L 5000 4050 50 
$EndSheet
Text Label 4600 5650 0    50   ~ 0
DEnRE
Text Label 4600 5950 0    50   ~ 0
BUTTON_1
Text Label 4600 5800 0    50   ~ 0
BUTTON_0
Text Label 4600 5500 0    50   ~ 0
LED_2
Text Label 4600 5350 0    50   ~ 0
LED_1
Text Label 4600 5200 0    50   ~ 0
LED_0
Text Label 6850 6600 0    50   ~ 0
cos
Text Label 4650 4500 0    50   ~ 0
UART_TX
Text Label 4650 4650 0    50   ~ 0
UART_RX
Wire Wire Line
	4650 4500 5000 4500
Wire Wire Line
	4650 4650 5000 4650
Wire Wire Line
	4600 5200 5000 5200
Wire Wire Line
	4600 5350 5000 5350
Wire Wire Line
	4600 5500 5000 5500
Wire Wire Line
	4600 5650 5000 5650
Wire Wire Line
	4600 5800 5000 5800
Wire Wire Line
	4600 5950 5000 5950
$Comp
L Connector_Generic:Conn_01x02 J2
U 1 1 5E32F096
P 1600 5750
F 0 "J2" H 1680 5742 50  0000 L CNN
F 1 "Conn_01x02" H 1680 5651 50  0000 L CNN
F 2 "motor_drive_footprints:2pos_254" H 1600 5750 50  0001 C CNN
F 3 "~" H 1600 5750 50  0001 C CNN
	1    1600 5750
	-1   0    0    1   
$EndComp
Wire Wire Line
	14700 2400 14700 4100
Wire Wire Line
	14200 2400 14700 2400
Wire Wire Line
	14700 6000 14700 4300
Wire Wire Line
	14200 6000 14700 6000
$Sheet
S 8500 4500 900  600 
U 5E291A12
F0 "I_sense_1" 50
F1 "sense_amp.sch" 50
F2 "OUT" I L 8500 4650 50 
F3 "IN+" I R 9400 4650 50 
F4 "IN-" I R 9400 4800 50 
F5 "GND" I L 8500 4950 50 
F6 "5.0V" I L 8500 4800 50 
$EndSheet
Text Label 6850 4500 0    50   ~ 0
I_sense_1
Text Label 8150 4650 0    50   ~ 0
I_sense_1
Wire Wire Line
	8150 4650 8500 4650
Wire Wire Line
	2250 5750 2250 5800
Wire Wire Line
	2250 5800 2450 5800
Text Label 4600 3200 0    50   ~ 0
chip_reset
Wire Wire Line
	4600 3200 5000 3200
$Sheet
S 8500 2000 750  650 
U 5E41A78C
F0 "therm_1" 50
F1 "thermistor.sch" 50
F2 "5.0V" I L 8500 2150 50 
F3 "signal" I L 8500 2300 50 
F4 "GND" I L 8500 2450 50 
$EndSheet
$Sheet
S 8500 3000 750  600 
U 5E41D6EC
F0 "thermistor_2" 50
F1 "therm_2.sch" 50
F2 "5.0V" I L 8500 3150 50 
F3 "signal" I L 8500 3300 50 
F4 "GND" I L 8500 3450 50 
$EndSheet
Text Label 8500 2150 2    50   ~ 0
5.0V
Text Label 8500 2300 2    50   ~ 0
therm_1
Text Label 8500 2450 2    50   ~ 0
GND
Text Label 8500 3150 2    50   ~ 0
5.0V
Text Label 8500 3300 2    50   ~ 0
therm_2
Text Label 8500 3450 2    50   ~ 0
GND
Wire Wire Line
	1800 5650 2450 5650
Wire Wire Line
	1800 5750 2250 5750
$Comp
L Connector_Generic:Conn_01x04 J3
U 1 1 5E4855FB
P 15500 4200
F 0 "J3" H 15580 4192 50  0000 L CNN
F 1 "Conn_01x04" H 15580 4101 50  0000 L CNN
F 2 "motor_drive_footprints:4pos_338" H 15500 4200 50  0001 C CNN
F 3 "~" H 15500 4200 50  0001 C CNN
	1    15500 4200
	1    0    0    -1  
$EndComp
Text Label 15300 4400 2    50   ~ 0
phase_shield
Wire Wire Line
	14700 4100 15300 4100
Wire Wire Line
	14200 4200 15300 4200
Wire Wire Line
	14700 4300 15300 4300
Text Label 3650 5950 0    50   ~ 0
phase_shield
Wire Wire Line
	2000 1700 2450 1700
Wire Wire Line
	2000 1850 2450 1850
Wire Wire Line
	2000 2000 2450 2000
Text Label 1250 1800 0    50   ~ 0
B
Text Label 1250 1900 0    50   ~ 0
balance
Text Label 1250 2000 0    50   ~ 0
GND
$Comp
L Connector_Generic:Conn_01x04 J1
U 1 1 5E4D4EA3
P 1050 1900
F 0 "J1" H 968 1475 50  0000 C CNN
F 1 "Conn_01x04" H 968 1566 50  0000 C CNN
F 2 "motor_drive_footprints:4pos_254" H 1050 1900 50  0001 C CNN
F 3 "~" H 1050 1900 50  0001 C CNN
	1    1050 1900
	-1   0    0    1   
$EndComp
Text Label 1250 1700 0    50   ~ 0
A
$EndSCHEMATC
