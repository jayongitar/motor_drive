EESchema Schematic File Version 4
EELAYER 30 0
EELAYER END
$Descr B 17000 11000
encoding utf-8
Sheet 1 14
Title ""
Date ""
Rev ""
Comp ""
Comment1 ""
Comment2 ""
Comment3 ""
Comment4 ""
$EndDescr
$Sheet
S 14000 1550 1000 1050
U 5E257703
F0 "half_bridge_1" 50
F1 "half_bridge.sch" 50
F2 "I_sense_p" I L 14000 2300 50 
F3 "I_sense_n" I L 14000 2450 50 
F4 "GH" I L 14000 1700 50 
F5 "GL" I L 14000 2000 50 
F6 "SH" I L 14000 1850 50 
F7 "M" I R 15000 1700 50 
F8 "DC_neg" I R 15000 2450 50 
F9 "DC_pos" I R 15000 2300 50 
$EndSheet
$Sheet
S 14000 3350 1000 1050
U 5E26944C
F0 "half_bridge_2" 50
F1 "half_bridge.sch" 50
F2 "I_sense_p" I L 14000 4100 50 
F3 "I_sense_n" I L 14000 4250 50 
F4 "GH" I L 14000 3500 50 
F5 "GL" I L 14000 3800 50 
F6 "SH" I L 14000 3650 50 
F7 "M" I R 15000 3500 50 
F8 "DC_neg" I R 15000 4250 50 
F9 "DC_pos" I R 15000 4100 50 
$EndSheet
$Sheet
S 14000 5150 1000 1100
U 5E26B60E
F0 "half_bridge_3" 50
F1 "half_bridge.sch" 50
F2 "I_sense_p" I L 14000 5900 50 
F3 "I_sense_n" I L 14000 6050 50 
F4 "GH" I L 14000 5300 50 
F5 "GL" I L 14000 5600 50 
F6 "SH" I L 14000 5450 50 
F7 "M" I R 15000 5300 50 
F8 "DC_neg" I R 15000 6050 50 
F9 "DC_pos" I R 15000 5900 50 
$EndSheet
$Sheet
S 9850 5800 900  600 
U 5E2938C8
F0 "I_sense_2" 50
F1 "sense_amp.sch" 50
F2 "OUT" I L 9850 5950 50 
F3 "IN+" I R 10750 5950 50 
F4 "IN-" I R 10750 6100 50 
F5 "GND" I L 9850 6250 50 
F6 "5.0V" I L 9850 6100 50 
$EndSheet
$Sheet
S 9850 6750 900  600 
U 5E295828
F0 "I_sense_3" 50
F1 "sense_amp.sch" 50
F2 "OUT" I L 9850 6900 50 
F3 "IN+" I R 10750 6900 50 
F4 "IN-" I R 10750 7050 50 
F5 "GND" I L 9850 7200 50 
F6 "5.0V" I L 9850 7050 50 
$EndSheet
$Sheet
S 9850 7700 900  600 
U 5E336639
F0 "IDC_sense" 50
F1 "sense_amp.sch" 50
F2 "OUT" I L 9850 7850 50 
F3 "IN+" I R 10750 7850 50 
F4 "IN-" I R 10750 8000 50 
F5 "GND" I L 9850 8150 50 
F6 "5.0V" I L 9850 8000 50 
$EndSheet
$Sheet
S 9850 8650 900  600 
U 5E33A08D
F0 "VDC_sense" 50
F1 "sense_amp.sch" 50
F2 "OUT" I L 9850 8800 50 
F3 "IN+" I R 10750 8800 50 
F4 "IN-" I R 10750 8950 50 
F5 "GND" I L 9850 9100 50 
F6 "5.0V" I L 9850 8950 50 
$EndSheet
$Sheet
S 2000 4500 900  1550
U 5E334D58
F0 "DC_Link_Input" 50
F1 "DC_Link.sch" 50
F2 "IDC_sense_p" I R 2900 4750 50 
F3 "IDC_sense_n" I R 2900 4900 50 
F4 "DC_pos" I R 2900 5650 50 
F5 "VDC_sense_p" I R 2900 5200 50 
F6 "VDC_sense_n" I R 2900 5350 50 
F7 "DC_neg" I R 2900 5800 50 
F8 "DC_pos_in" I L 2000 5650 50 
F9 "DC_neg_in" I L 2000 5800 50 
$EndSheet
$Sheet
S 2000 8000 900  1000
U 5E373134
F0 "Position sensor" 50
F1 "ADA4571WHRZ.sch" 50
F2 "GND" I R 2900 8800 50 
F3 "SIN" I R 2900 8200 50 
F4 "COS" I R 2900 8350 50 
F5 "VDD" I R 2900 8650 50 
$EndSheet
$Sheet
S 2000 1500 950  1150
U 5E38D632
F0 "RS422" 50
F1 "SN65.sch" 50
F2 "GND" I R 2950 2450 50 
F3 "VCC" I R 2950 2300 50 
F4 "D" I R 2950 1850 50 
F5 "R" I R 2950 2000 50 
F6 "DEnRE" I R 2950 1700 50 
F7 "A" I L 2000 1700 50 
F8 "B" I L 2000 1850 50 
F9 "balance" I L 2000 2000 50 
$EndSheet
Text Label 10750 5150 0    50   ~ 0
I_sense_1n
Text Label 10750 5000 0    50   ~ 0
I_sense_1p
Text Label 10750 6100 0    50   ~ 0
I_sense_2n
Text Label 10750 5950 0    50   ~ 0
I_sense_2p
Text Label 10750 7050 0    50   ~ 0
I_sense_3n
Text Label 10750 6900 0    50   ~ 0
I_sense_3p
Text Label 11400 4500 0    50   ~ 0
5.0V
Text Label 11400 4650 0    50   ~ 0
GND
Wire Wire Line
	11400 4650 11800 4650
Wire Wire Line
	11400 4500 11650 4500
Wire Wire Line
	11800 4350 11650 4350
Wire Wire Line
	11650 4350 11650 4500
Connection ~ 11650 4500
Wire Wire Line
	11650 4500 11800 4500
$Sheet
S 11800 2800 900  2050
U 5E28CA2E
F0 "FAN7888" 50
F1 "FAN7888.sch" 50
F2 "GND" I L 11800 4650 50 
F3 "VDD" I L 11800 4500 50 
F4 "BS_SUP" I L 11800 4350 50 
F5 "GH_1" I R 12700 3000 50 
F6 "GL_1" I R 12700 3300 50 
F7 "GH_2" I R 12700 3650 50 
F8 "GL_2" I R 12700 3950 50 
F9 "GH_3" I R 12700 4300 50 
F10 "GL_3" I R 12700 4600 50 
F11 "SW_1" I R 12700 3150 50 
F12 "SW_2" I R 12700 3800 50 
F13 "SW_3" I R 12700 4450 50 
F14 "HS_1" I L 11800 3000 50 
F15 "LS_1" I L 11800 3150 50 
F16 "HS_2" I L 11800 3400 50 
F17 "LS_2" I L 11800 3550 50 
F18 "HS_3" I L 11800 3850 50 
F19 "LS_3" I L 11800 4000 50 
$EndSheet
Text Label 12700 3000 0    50   ~ 0
GH_1
Text Label 12700 3150 0    50   ~ 0
SW_1
Text Label 12700 3300 0    50   ~ 0
GL_1
Text Label 12700 3650 0    50   ~ 0
GH_2
Text Label 12700 3800 0    50   ~ 0
SW_2
Text Label 12700 3950 0    50   ~ 0
GL_2
Text Label 12700 4300 0    50   ~ 0
GH_3
Text Label 12700 4450 0    50   ~ 0
SW_3
Text Label 12700 4600 0    50   ~ 0
GL_3
Text Label 11600 3000 0    50   ~ 0
HS_1
Text Label 11600 3150 0    50   ~ 0
LS_1
Text Label 11600 3400 0    50   ~ 0
HS_2
Text Label 11600 3550 0    50   ~ 0
LS_2
Text Label 11600 3850 0    50   ~ 0
HS_3
Text Label 11600 4000 0    50   ~ 0
LS_3
Text Label 13800 3500 0    50   ~ 0
GH_2
Wire Wire Line
	11600 3000 11800 3000
Wire Wire Line
	11600 3150 11800 3150
Wire Wire Line
	11600 3400 11800 3400
Wire Wire Line
	11600 3550 11800 3550
Wire Wire Line
	11600 3850 11800 3850
Wire Wire Line
	11600 4000 11800 4000
Wire Wire Line
	13800 3500 14000 3500
Text Label 13800 3650 0    50   ~ 0
SW_2
Text Label 13800 3800 0    50   ~ 0
GL_2
Text Label 13800 1700 0    50   ~ 0
GH_1
Text Label 13800 1850 0    50   ~ 0
SW_1
Text Label 13800 2000 0    50   ~ 0
GL_1
Text Label 13800 5300 0    50   ~ 0
GH_3
Text Label 13800 5450 0    50   ~ 0
SW_3
Text Label 13800 5600 0    50   ~ 0
GL_3
Wire Wire Line
	13800 5300 14000 5300
Wire Wire Line
	13800 5450 14000 5450
Wire Wire Line
	13800 5600 14000 5600
Wire Wire Line
	13800 3650 14000 3650
Wire Wire Line
	13800 3800 14000 3800
Wire Wire Line
	13800 1700 14000 1700
Wire Wire Line
	13800 1850 14000 1850
Wire Wire Line
	13800 2000 14000 2000
Text Label 9650 5150 0    50   ~ 0
5.0V
Text Label 9650 5300 0    50   ~ 0
GND
Text Label 9500 5950 0    50   ~ 0
I_sense_2
Text Label 9650 6100 0    50   ~ 0
5.0V
Text Label 9650 6250 0    50   ~ 0
GND
Text Label 9500 6900 0    50   ~ 0
I_sense_3
Text Label 9650 7050 0    50   ~ 0
5.0V
Text Label 9650 7200 0    50   ~ 0
GND
Text Label 9450 7850 0    50   ~ 0
IDC_sense
Text Label 9450 8800 0    50   ~ 0
VDC_sense
Text Label 9650 8950 0    50   ~ 0
5.0V
Text Label 9650 9100 0    50   ~ 0
GND
Text Label 9650 8000 0    50   ~ 0
5.0V
Text Label 9650 8150 0    50   ~ 0
GND
Wire Wire Line
	9450 8800 9850 8800
Wire Wire Line
	9650 8950 9850 8950
Wire Wire Line
	9650 9100 9850 9100
Wire Wire Line
	9650 8150 9850 8150
Wire Wire Line
	9650 8000 9850 8000
Wire Wire Line
	9850 7850 9450 7850
Wire Wire Line
	9650 7200 9850 7200
Wire Wire Line
	9650 7050 9850 7050
Wire Wire Line
	9500 6900 9850 6900
Wire Wire Line
	9650 5150 9850 5150
Wire Wire Line
	9650 5300 9850 5300
Wire Wire Line
	9500 5950 9850 5950
Wire Wire Line
	9650 6100 9850 6100
Wire Wire Line
	9650 6250 9850 6250
Text Label 10750 7850 0    50   ~ 0
IDC_sense_p
Text Label 10750 8000 0    50   ~ 0
IDC_sense_n
Text Label 10750 8800 0    50   ~ 0
VDC_sense_p
Text Label 10750 8950 0    50   ~ 0
VDC_sense_n
Text Label 15000 2300 0    50   ~ 0
DC_pos
Text Label 15000 2450 0    50   ~ 0
DC_neg
Text Label 15000 4100 0    50   ~ 0
DC_pos
Text Label 15000 4250 0    50   ~ 0
DC_neg
Text Label 15000 5900 0    50   ~ 0
DC_pos
Text Label 15000 6050 0    50   ~ 0
DC_neg
Text Label 13600 2300 0    50   ~ 0
I_sense_p1
Text Label 13600 2450 0    50   ~ 0
I_sense_n1
Text Label 13600 4100 0    50   ~ 0
I_sense_p2
Text Label 13600 4250 0    50   ~ 0
I_sense_n2
Text Label 13600 5900 0    50   ~ 0
I_sense_p3
Text Label 13600 6050 0    50   ~ 0
I_sense_n3
Wire Wire Line
	13600 5900 14000 5900
Wire Wire Line
	13600 6050 14000 6050
Wire Wire Line
	13600 4250 14000 4250
Wire Wire Line
	13600 4100 14000 4100
Wire Wire Line
	13600 2450 14000 2450
Wire Wire Line
	13600 2300 14000 2300
Text Label 2900 8200 0    50   ~ 0
sin
Text Label 2900 8350 0    50   ~ 0
cos
Text Label 2900 8650 0    50   ~ 0
5.0V
Text Label 2900 8800 0    50   ~ 0
GND
Text Label 7500 3800 0    50   ~ 0
HS_1
Text Label 7500 3950 0    50   ~ 0
LS_1
Text Label 7500 4100 0    50   ~ 0
HS_2
Text Label 7500 4250 0    50   ~ 0
LS_2
Text Label 7500 4400 0    50   ~ 0
HS_3
Text Label 7500 4550 0    50   ~ 0
LS_3
Text Label 7500 5100 0    50   ~ 0
I_sense_2
Text Label 7500 5250 0    50   ~ 0
I_sense_3
Text Label 7500 5400 0    50   ~ 0
IDC_sense
Text Label 7500 5550 0    50   ~ 0
VDC_sense
Text Label 7500 5700 0    50   ~ 0
sin
Text Label 7500 5850 0    50   ~ 0
cos
Text Label 7500 6300 0    50   ~ 0
I_sense_1
Text Label 7500 6450 0    50   ~ 0
I_sense_2
Text Label 7500 6600 0    50   ~ 0
IDC_sense
Text Label 7500 6750 0    50   ~ 0
VDC_sense
Text Label 7500 6900 0    50   ~ 0
sin
Text Label 5450 3800 0    50   ~ 0
MOSI
Text Label 5450 3950 0    50   ~ 0
MISO
Text Label 5450 4100 0    50   ~ 0
CLK
Text Label 5450 4250 0    50   ~ 0
nEN
Wire Wire Line
	5450 3800 5650 3800
Wire Wire Line
	5450 3950 5650 3950
Wire Wire Line
	5450 4100 5650 4100
Wire Wire Line
	5450 4250 5650 4250
Text Label 5450 6900 0    50   ~ 0
5.0V
Text Label 5450 7050 0    50   ~ 0
GND
Wire Wire Line
	5450 7050 5650 7050
Wire Wire Line
	5450 6900 5650 6900
Text Label 2900 4750 0    50   ~ 0
IDC_sense_p
Text Label 2900 4900 0    50   ~ 0
IDC_sense_n
Text Label 2900 5200 0    50   ~ 0
VDC_sense_p
Text Label 2900 5350 0    50   ~ 0
VDC_sense_n
Text Label 2900 5650 0    50   ~ 0
DC_pos
Text Label 2900 5800 0    50   ~ 0
DC_neg
Text Label 1800 1700 0    50   ~ 0
A
Text Label 1800 1850 0    50   ~ 0
B
Wire Wire Line
	1800 1700 2000 1700
Wire Wire Line
	1800 1850 2000 1850
Text Label 2950 2300 0    50   ~ 0
5.0V
Text Label 2950 2450 0    50   ~ 0
GND
Text Label 1700 2000 0    50   ~ 0
balance
Wire Wire Line
	1700 2000 2000 2000
Text Label 2950 1850 0    50   ~ 0
UART_TX
Text Label 2950 2000 0    50   ~ 0
UART_RX
Text Label 2950 1700 0    50   ~ 0
DEnRE
$Sheet
S 5650 3450 1850 3900
U 5E2C4A87
F0 "F28027" 50
F1 "F28027.sch" 50
F2 "ADC_A0" I R 7500 4950 50 
F3 "ADC_A1" I R 7500 5100 50 
F4 "ADC_A2" I R 7500 5250 50 
F5 "ADC_A3" I R 7500 5400 50 
F6 "ADC_A4" I R 7500 5550 50 
F7 "ADC_A6" I R 7500 5700 50 
F8 "ADC_A7" I R 7500 5850 50 
F9 "ADC_B1" I R 7500 6300 50 
F10 "ADC_B2" I R 7500 6450 50 
F11 "ADC_B3" I R 7500 6600 50 
F12 "ADC_B4" I R 7500 6750 50 
F13 "ADC_B6" I R 7500 6900 50 
F14 "PWM1" I R 7500 3800 50 
F15 "PWM2" I R 7500 3950 50 
F16 "PWM3" I R 7500 4100 50 
F17 "PWM4" I R 7500 4250 50 
F18 "PWM5" I R 7500 4400 50 
F19 "PWM6" I R 7500 4550 50 
F20 "5.0V" I L 5650 6900 50 
F21 "GND" I L 5650 7050 50 
F22 "UART_TX" I L 5650 4950 50 
F23 "UART_RX" I L 5650 5100 50 
F24 "GPIO_34" I L 5650 5650 50 
F25 "GPIO_33" I L 5650 5800 50 
F26 "GPIO_32" I L 5650 5950 50 
F27 "GPIO_6" I L 5650 6400 50 
F28 "GPIO_12" I L 5650 6100 50 
F29 "GPIO_7" I L 5650 6250 50 
F30 "ADC_B7" I R 7500 7050 50 
$EndSheet
Text Label 5250 6100 0    50   ~ 0
DEnRE
Text Label 5250 6400 0    50   ~ 0
BUTTON_1
Text Label 5250 6250 0    50   ~ 0
BUTTON_0
Text Label 5250 5950 0    50   ~ 0
LED_2
Text Label 5250 5800 0    50   ~ 0
LED_1
Text Label 5250 5650 0    50   ~ 0
LED_0
Text Label 7500 7050 0    50   ~ 0
cos
Text Label 5300 4950 0    50   ~ 0
UART_TX
Text Label 5300 5100 0    50   ~ 0
UART_RX
Wire Wire Line
	5300 4950 5650 4950
Wire Wire Line
	5300 5100 5650 5100
Wire Wire Line
	5250 5650 5650 5650
Wire Wire Line
	5250 5800 5650 5800
Wire Wire Line
	5250 5950 5650 5950
Wire Wire Line
	5250 6100 5650 6100
Wire Wire Line
	5250 6250 5650 6250
Wire Wire Line
	5250 6400 5650 6400
$Comp
L Connector_Generic:Conn_01x03 J2
U 1 1 5E32DF06
P 16050 3500
F 0 "J2" H 16130 3542 50  0000 L CNN
F 1 "Conn_01x03" H 16130 3451 50  0000 L CNN
F 2 "motor_drive_footprints:3pos_254" H 16050 3500 50  0001 C CNN
F 3 "~" H 16050 3500 50  0001 C CNN
	1    16050 3500
	1    0    0    -1  
$EndComp
$Comp
L Connector_Generic:Conn_01x02 J1
U 1 1 5E32F096
P 1400 5750
F 0 "J1" H 1480 5742 50  0000 L CNN
F 1 "Conn_01x02" H 1480 5651 50  0000 L CNN
F 2 "motor_drive_footprints:2pos_254" H 1400 5750 50  0001 C CNN
F 3 "~" H 1400 5750 50  0001 C CNN
	1    1400 5750
	-1   0    0    1   
$EndComp
Wire Wire Line
	15000 3500 15850 3500
Wire Wire Line
	15500 1700 15500 3400
Wire Wire Line
	15500 3400 15850 3400
Wire Wire Line
	15000 1700 15500 1700
Wire Wire Line
	15500 5300 15500 3600
Wire Wire Line
	15500 3600 15850 3600
Wire Wire Line
	15000 5300 15500 5300
$Sheet
S 9850 4850 900  600 
U 5E291A12
F0 "I_sense_1" 50
F1 "sense_amp.sch" 50
F2 "OUT" I L 9850 5000 50 
F3 "IN+" I R 10750 5000 50 
F4 "IN-" I R 10750 5150 50 
F5 "GND" I L 9850 5300 50 
F6 "5.0V" I L 9850 5150 50 
$EndSheet
Text Label 7500 4950 0    50   ~ 0
I_sense_1
Text Label 9500 5000 0    50   ~ 0
I_sense_1
Wire Wire Line
	9500 5000 9850 5000
Wire Wire Line
	2000 5650 1600 5650
Wire Wire Line
	1600 5750 1800 5750
Wire Wire Line
	1800 5750 1800 5800
Wire Wire Line
	1800 5800 2000 5800
$EndSCHEMATC
